# Family Chat Application - App Flow Document

## Introduction

This application is a real-time family chat platform designed to connect pre-registered family members through a shared chat room. The main goal is to allow users to securely log in and exchange text messages, emojis, and JPEG images in a simple, engaging, and child-friendly environment. The application architecture leverages a React and TypeScript frontend and a Node.js backend with Socket.io for real-time communication. Pre-registered users log in using assigned usernames and passwords and interact within a vibrant interface that is both desktop and mobile friendly.

## Onboarding and Sign-In/Sign-Up

When a user first accesses the application, they are greeted with a friendly login page that emphasizes bright colors and kid-friendly emojis. The login page is deliberately simple, displaying clear fields for the pre-assigned username and password. There is no self-registration option because all users are pre-registered by an administrator using a command-line interface script. The user enters their credentials and the client sends an HTTP request to the /api/auth/login endpoint on the backend. If the credentials are recognized, a JWT token and relevant user details like display name and avatar URL are returned to the client. The token is securely stored in local storage so that the user can be authenticated for both API requests and real-time socket communications. There is also a clear option to log out so that when the user is finished, their token is cleared and they are redirected back to this login screen.

## Main Dashboard or Home Page

After a successful login, the user is automatically taken to the main chat interface. The default view displays a header featuring the application name, an online indicator, and a logout button for session management. The screen is divided into two primary areas. The first area is a dynamic message list where all past and ongoing messages are displayed in a scrollable container, complete with inline emojis and image thumbnails for shared JPEG files. The second area is the input section that provides a text input field with emoji support, an image uploader with a preview feature, and a send button. This straightforward layout allows users to quickly join and engage in the family group chat.

## Detailed Feature Flows and Page Transitions

Once on the chat screen, the application immediately utilizes stored authentication tokens to establish a secure WebSocket connection with the server. The token is included in the connection handshake so that the server can quickly authenticate the user. When the connection is confirmed, the server broadcasts a user_joined event that updates the chat interface to indicate a new family member has joined the conversation. As messages are sent, the client listens for the real-time 'message' event from the server. Users can type a message in the text input area, select emojis from an integrated emoji picker, or choose a JPEG image to upload by clicking the image upload button. If an image is chosen, a preview is displayed and the image is sent via a multipart/form-data request to the /api/messages/upload endpoint. The server processes the image, shrinking it if necessary, and returns a URL that is immediately used to generate a new message broadcast through the WebSocket. Over the course of the conversation, the chat automatically scrolls to the newest messages. When a user wants to disconnect, a logout feature in the header clears local storage of the JWT token and terminates the WebSocket connection, returning the user gracefully to the login page.

## Settings and Account Management

The application provides a simple and intuitive user menu accessible from the header on the main chat page. This menu allows users to view basic account information such as their display name and avatar. Although there is no extensive settings module, users have the ability to log out from this menu. This action clears the locally stored JWT token and properly ends the session. For the duration of a session, notification preferences and other student-friendly settings are handled automatically within the interactive interface so that the user experience remains streamlined and is primarily focused on the chat interactions.

## Error States and Alternate Paths

The application is designed with basic error handling to ensure a smooth experience. When a user enters invalid credentials on the login page, a clear message is displayed to inform them of the error so they can try again. In the chat room, if a user attempts to upload an image that is not in JPEG format or that exceeds the acceptable size limits, the interface informs them of the issue and prompts for a different file. If, during the WebSocket communication, the connection drops unexpectedly due to network issues, the user simply remains on the chat screen with the understanding that a re-login might be required. Every error message is presented in plain language along with a suggestion to correct the error, ensuring that users are kept informed and are able to return to normal usage quickly.

## Conclusion and Overall App Journey

The user experience in this Family Chat Application is streamlined from the initial sign-in to everyday interaction in the chat room. Users begin by accessing a friendly login page where they use pre-assigned credentials to sign in. Upon successful authentication, they are directed to a secure and dynamic chat interface where text messages, emojis, and JPEG images are exchanged in real time. The journey is designed to be intuitive, with each action linking clearly to the nextâ€”from logging in and joining the chat to sending messages and ultimately logging out. With secure authentication, real-time communication, and a child-friendly design, this application ensures that family members can connect easily and safely in an engaging environment.
